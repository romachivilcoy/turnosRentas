{% extends 'base.html.twig' %}

{% block body %}
    <!--<div class="wrapper" style="height: 100%;">-->


    <header style="margin-top: -10px;background-color: #33BB66; " >
        <nav class="navbar navbar-static-top" role="navigation" style="position:relative;">
                <span class="head-title text-center">
                    <!-- Page Heading -->
                    <h1 class="text-center" style="color: #fff;">TURNOS RENTAS
                        <small style="color: #fff;">Seleccione motivo consulta</small>
                    </h1>
                </span>

            <span class="head-img">
                    <img src="{{ asset('img/muni.png') }}">
                </span>
        </nav>
    </header>

    <!-- Page Content -->

    <div class="container" style="height: 80vh;">
        <div class="loader" id="loader">  </div>

        <div class="row justify-content-center align-items-center" style="height: 100%;" id="padre_opcion" name="padre_opcion" >

            <div class="col-12 mt-4" id="div_contri">
                <div class="info-box bg-yellow pd-4 pb-4" >
                        <span class="info-box-icon pd-3 pb-3 h-100">
                            <!--<span class="glyphicon glyphicon-user" aria-hidden="true">
                            </span>-->
                            <i class="fa fa-user" aria-hidden="true"></i>
                        </span>

                    <div class="info-box-content">
                        <span class="info-box-text"><h1 class="h_padre" style="margin-top: 0.3em!important; margin-bottom: 0.1em!important;">CONTRIBUYENTES</h1></span>
                    </div>
                </div>
            </div>

            <div class="col-12" id="div_inmuebles">
                <div class="info-box bg-green pd-4 pb-4">
                        <span class="info-box-icon pd-3 pb-3 h-100">
                            <i class="fa fa-home" aria-hidden="true"></i>
                            <!--<span class="glyphicon glyphicon-home" aria-hidden="true">

                            </span>-->
                        </span>
                    <div class="info-box-content">
                        <span class="info-box-text"><h1 class="h_padre" style="margin-top: 0.3em!important; margin-bottom: 0.1em!important;">INMUEBLES</h1></span>
                        <!--<p class="card-text">CAMBIO DE TITULARIDAD - CORRECCION DE FACTURACION - TRANFERENCIA DE PAGOS - CAMBIO DE DOMICILIO.</p>-->
                    </div>
                </div>
            </div>

            <div class="col-12" id="div_comercios">
                <div class="info-box bg-red pd-4 pb-4">
                        <span class="info-box-icon pr-3 pb-3 h-100">
                            <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                            <!--<span class="glyphicon glyphicon-shopping-cart" aria-hidden="true">

                            </span>-->
                        </span>
                    <div class="info-box-content">
                        <span class="info-box-text"><h1 class="h_padre" style="margin-top: 0.3em!important; margin-bottom: 0.1em!important;">COMERCIOS</h1></span>
                        <!--<p class="card-text">ALTA , BAJA EN TASA DE SEGURIDAD E HIGIENE - MODIFICACION DE DATOS - OTROS.</p>-->
                    </div>
                </div>
            </div>

            <div class="col-12" id="div_rodados">
                <div class="info-box bg-aqua pd-4 pb-4">
                        <span class="info-box-icon pd-3 pb-3 h-100">
                            <!--<span class="glyphicon glyphicon-road   " aria-hidden="true">

                            </span>-->
                            <i class="fa fa-car" aria-hidden="true"></i>

                        </span>
                    <div class="info-box-content">
                        <span class="info-box-text"><h1 class="h_padre" style="margin-top: 0.3em!important; margin-bottom: 0.1em!important;">RODADOS</h1></span>
                        <!-- <p class="card-text">ALTA Y CAMBIO DE TITULARIDAD - BAJA DE RODADO - DENUNCIA DE VENTA - OTROS.</p>-->
                    </div>
                </div>
            </div>
        </div>

        <div class="row justify-content-center align-items-center" style="height: 100%; display: none;" id="hijo_opcion" name="hijo_opcion">
            <div class="row">
                <div class="col-12 mt-4" id="hijo_t1" name="hijo_t1" style="display: none;"><!--onclick="mostrar_lista();"-->
                    <div class="info-box bg-yellow">
                            <span class="info-box-icon">
                                1
                            </span>
                        <div class="info-box-content">
                            <span class="info-box-text"><label id="lbl_uno"></label></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-sm-12" id="hijo_t2" name="hijo_t2" style="display: none;">
                    <div class="info-box bg-yellow">
                            <span class="info-box-icon">
                                2
                            </span>
                        <div class="info-box-content">
                            <span class="info-box-text"><label id="lbl_dos"></label></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-sm-12" id="hijo_t3" name="hijo_t3" style="display: none;">
                    <div class="info-box bg-yellow">
                            <span class="info-box-icon">
                                3
                            </span>
                        <div class="info-box-content">
                            <span class="info-box-text"><label id="lbl_tres"></label></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-sm-12" id="hijo_t4" name="hijo_t4" style="display: none;">
                    <div class="info-box bg-yellow">
                            <span class="info-box-icon">
                                4
                            </span>
                        <div class="info-box-content">
                            <span class="info-box-text"><label id="lbl_cuatro"></label></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12 col-sm-12" id="div_volver" name="div_volver" style="display: none;">
                    <div class="info-box bg-secondary">
                            <span class="info-box-icon">
                               <!-- <span class="glyphicon glyphicon-arrow-left" aria-hidden="true">

                                </span>-->
                                <i class="fa fa-arrow-left" aria-hidden="true"></i>
                            </span>
                        <div class="info-box-content">
                            <span class="info-box-text"><label>VOLVER</label></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal -->
        <div class="modal" tabindex="-1" role="dialog" id="div_modal_ticket">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content" >
                    <div class="modal-header" style="background-color: #f39c12 !important; color: #fff;">
                        <h3 class="modal-title">IMPRIMIENDO TICKET...</h3>

                    </div>
                    <div class="modal-body" >

                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal -->
    </div>

    <!-- /.container -->

    <input type="text" id="txt_tipo" value="0" style="display:none;">
    <!--<input type="text" id="txt_hijo" value="0" style="display:none;">-->

    <!--</div>-->

    <!-- Footer -->
    <footer class="main-footer d-none d-md-block d-lg-block mt-4">

        Desarrollado por la Dirección de Informática de la Municipalidad de Chivilcoy

        <!-- /.container -->
    </footer>

{% endblock %}

{% block stylesheets %}
    <style>


        header {
            padding-right: 15px;
            padding-left: 15px;
            margin-right: auto;
            margin-left: auto;
            min-height: 50px;
            width: 100%;
        }

        footer {
            height: 53px;
            min-height: 53px;
            width: 100%;
            line-height: 60px;
            background-color: #4C4;
        }

        .container {

            /* margin-top: 5%;*/
        }


        .main-footer {

            text-align: center;
            background-color: #33BB66;
            color: white;
            max-height: 40px;
        }


        p{
            border-top: 1px solid #f5f5f5;
        }


        .mdb-color{
            background-color: #7283a7!important;
        }


        .info-box {
            display: block;
            min-height: 90px;
            background: #fff;
            width: 100%;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
            border-radius: 2px;
            margin-bottom: 15px;
        }

        .info-box-icon {
            border-top-left-radius: 2px;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-bottom-left-radius: 2px;
            display: block;
            float: left;
            height: 90px;
            width: 90px;
            text-align: center;
            font-size: 45px;
            line-height: 90px;
            background: rgba(0,0,0,0.2);
        }

        .info-box-content {
            padding: 5px 10px;
            margin-left: 90px;
        }

        .info-box-text {
            text-transform: uppercase;
            color: #fff!important;
            font-size: 30px;
            text-align: center;
        }

        .bg-yellow, .modal-warning .modal-body {
            background-color: #f39c12 !important;
        }

        .bg-green, .modal-success .modal-body {
            background-color: #00a65a !important;
        }

        .bg-red, .callout.callout-danger, .alert-danger, .alert-error, .label-danger, .modal-danger .modal-body {
            background-color: #dd4b39 !important;
        }

        .bg-aqua, .callout.callout-info, .alert-info, .label-info, .modal-info .modal-body {
            background-color: #00c0ef !important;
        }

        .fa{
            color: #fff!important;
        }


        .dropdown-item{
            font-size: 30px;
        }

        label{
            padding: 10px;
            width:100%;
            text-align:center;
            font-size: 38px;

        }

        .label_padre{
            font-size: 50px;
            letter-spacing: 10px;
        }

        .h_padre{
            font-weight: bold;
            letter-spacing: 3px;
            font-size: 47px;
        }
        .card-text{
            color: #fff;
            font-weight: 700;
        }
    </style>
{% endblock %}
{% block javascripts %}
    <script>
        /*$(document).ready(function(){
         $(document).on('show.bs.modal', '.modal', function (event) {

         var zIndex = 1040 + (10 * $('.modal:visible').length);
         $(this).css('z-index', zIndex);
         setTimeout(function() {
         $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
         }, 0);
         });

         });*/
        $(document).ready(function(){



            document.getElementById("loader").style.display = "none";

            $(document).ajaxSend(function(event, request, settings) {

                document.getElementById("loader").style.display = "block";
            });

            $( "#div_contri" ).click(function() {
                //------ LLAMA A FUNCION PARA MOSTRAR LAS OPCIONES
                mostrar_lista('1');
            });

            $( "#div_inmuebles" ).click(function() {
                //------ LLAMA A FUNCION PARA MOSTRAR LAS OPCIONES
                mostrar_lista('2');
            });

            $( "#div_comercios" ).click(function() {
                //------ LLAMA A FUNCION PARA MOSTRAR LAS OPCIONES
                mostrar_lista('3');
            });

            $( "#div_rodados" ).click(function() {
                //------ LLAMA A FUNCION PARA MOSTRAR LAS OPCIONES
                mostrar_lista('4');
            });



            $( "#div_volver" ).click(function() {
                //------------------------------------------------------
                //OCULTA OPCIONES HIJOS -- MUSTRA OPCIONES PRINCIPALES
                //------------------------------------------------------

                $( "#hijo_t1" ).hide( "fast");
                $( "#hijo_t2" ).hide( "fast");
                $( "#hijo_t3" ).hide( "fast");
                $( "#hijo_t4" ).hide( "fast" );
                $( "#div_volver" ).hide("fast",  function() {

                    document.getElementById('padre_opcion').style.display   ="block";
                    document.getElementById('padre_opcion').style.display   ="flex";
                    document.getElementById('hijo_opcion').style.display    ="none";
                    document.getElementById('hijo_t1').style.display        ="none";
                    document.getElementById('hijo_t2').style.display        ="none";
                    document.getElementById('hijo_t3').style.display        ="none";
                    document.getElementById('hijo_t4').style.display        ="none";
                });
            });

            $("#hijo_t1").click(function () {
                //*************************************
                // CLICK EN LAS OPCIONES HIJO
                //*************************************

                AltaTicket(1);
            });
            $("#hijo_t2").click(function () {
                //*************************************
                // CLICK EN LAS OPCIONES HIJO
                //*************************************
                AltaTicket(2);
            });
            $("#hijo_t3").click(function () {
                //*************************************
                // CLICK EN LAS OPCIONES HIJO
                //*************************************
                AltaTicket(3);
            });
            $("#hijo_t4").click(function () {
                //*************************************
                // CLICK EN LAS OPCIONES HIJO
                //*************************************
                AltaTicket(4);
            });

        });


        function AltaTicket(n_motivo){
            //------------------------------------
            //ALTA TICKET
            //------------------------------------
            //MUESTRA MODAL DE TICKET

            $('#div_modal_ticket').modal("show");

            var tipo_tk_sel = document.getElementById('txt_tipo').value;

            $.ajax({
                type: 'GET',
                data:"tipo_tk=" + tipo_tk_sel + '&' + 'n_motivo='+n_motivo,//data: { apesel: q},
                url:"{{ url('AltaTicket') }}",
                success:function(data){
                    console.log(data);

                    /* if(data != "no_data"){
                     resp_consulta = data;
                     resp_consulta[1].c_tramite;*/

                    //********************************
                    //CIERRA MODAL Y RECARGA LA PAGINA
                    //********************************
                    setTimeout(function() {
                        $('#div_modal_ticket').modal('hide');
                        location.reload();
                    }, 2000);

                    // }//end if
                }//end success
            })//ajax
            //*************************************
        }//end function

        function mostrar_lista(tipo_tramite){

            document.getElementById('txt_tipo').value = tipo_tramite;

            switch(tipo_tramite){
                case '1':
                    //********************
                    //TIPO CONTRIBUYENTES
                    //********************
                    var clase_div = "info-box bg-yellow";
                    $("label[id=lbl_uno]").text('ALTA COMO CONTRIBUYENTE GENERAL');
                    $("label[id=lbl_dos]").text('AMPLIACION DE CUOTAS');
                    $("label[id=lbl_tres]").text('PRESCRIPCION DE TASAS MUNICIPALES');
                    $("label[id=lbl_cuatro]").text('CAMBIO DE TITULARIDAD');
                    break;
                case '2':
                    var clase_div = "info-box bg-green";
                    $("label[id=lbl_uno]").text('CAMBIO DE TITULARIDAD');
                    $("label[id=lbl_dos]").text('CORRECCION DE FACTURARCIÓN');
                    $("label[id=lbl_tres]").text('TRANFERENCIA DE PAGOS');
                    $("label[id=lbl_cuatro]").text('CAMBIO DE DOMICILIO');
                    break;
                case '3':

                    var clase_div = "info-box bg-red";
                    $("label[id=lbl_uno]").text('ALTA EN TASA DE SEGURIDAD E HIGIENE');
                    $("label[id=lbl_dos]").text('BAJA EN TASA DE SEGURIDAD E HIGIENE');
                    $("label[id=lbl_tres]").text('MODIFICACION DE DATOS');
                    $("label[id=lbl_cuatro]").text('OTROS');

                    break;
                case '4':
                    var clase_div = "info-box bg-aqua";
                    $("label[id=lbl_uno]").text('ALTA Y CAMBIO DE TITULARIDAD');
                    $("label[id=lbl_dos]").text('BAJA DE RODADO');
                    $("label[id=lbl_tres]").text('DENUNCIA DE VENTA');
                    $("label[id=lbl_cuatro]").text('OTROS');

                    break;
            }

            //-----------------------------------
            //CAMBIA CLASE
            //-----------------------------------
            document.getElementById("hijo_t1").getElementsByTagName('div')[0].className += clase_div;
            document.getElementById("hijo_t2").getElementsByTagName('div')[0].className += clase_div;
            document.getElementById("hijo_t3").getElementsByTagName('div')[0].className += clase_div;
            document.getElementById("hijo_t4").getElementsByTagName('div')[0].className += clase_div;


            //-----------------------------------------------------------------
            //OCUALT BOTONES PRINCIPALES --- MUESTRA BOTONES TIPO DE TRAMITES
            //--------------------  ---------------------------------------------
            document.getElementById('padre_opcion').style.display   = "none";
            document.getElementById('hijo_opcion').style.display    = "block";

            $('#hijo_t1').first().show( "fast", function showNext() {
                $('#hijo_t1').next( "div" ).show( "slow", showNext );
            });
            $('#hijo_t2').first().show( "fast", function showNext() {
                $('#hijo_t2').next( "div" ).show( "slow", showNext );
            });
            $('#hijo_t3').first().show( "fast", function showNext() {
                $('#hijo_t3').next( "div" ).show( "slow", showNext );
            });
            $('#hijo_t4').first().show( "fast", function showNext() {
                $('#hijo_t4').next( "div" ).show( "slow", showNext );
            });

            $('#div_volver').first().show( "fast", function showNext() {
                $('#div_volver').next( "div" ).show( "slow", showNext );
            });

        }
    </script>
{% endblock %}
